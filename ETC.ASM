	nolist
	include	"equ.lib"
	include	"macro.lib"
	list

	xdef	vsync,random,sinset,atan

;------------------------------------------------------------------------------
vsync:					; [TODO] original name unknown
	move	#$2300,sr
.loop:					; [TODO] original name unknown
	tst.b	int_flg
	bne.b	.loop
	rts

random:					; [TODO] locate original library
	move.l	ranum,d1
	bne.b	.number
	move.l	#$2A6D365A,d1
.number:				; [TODO] original name unknown
	move.l	d1,d0
	asl.l	#2,d1
	add.l	d0,d1
	asl.l	#3,d1
	add.l	d0,d1
	move.w	d1,d0
	swap	d1
	add.w	d1,d0
	move.w	d0,d1
	swap	d1
	move.l	d1,ranum
	rts

sinset:
	andi.w	#$ff,d0
	add.w	d0,d0
	addi.w	#$80,d0
	move.w	sintable(pc,d0.w),d1
	subi.w	#$80,d0
	move.w	sintable(pc,d0.w),d0
	rts
sintable:				; [TODO] original formatting unknown
	dc.w	0000,0006,0012,0018,0025,0031,0037,0043
	dc.w	0049,0056,0062,0068,0074,0080,0086,0092
	dc.w	0097,0103,0109,0115,0120,0126,0131,0136
	dc.w	0142,0147,0152,0157,0162,0167,0171,0176
	dc.w	0181,0185,0189,0193,0197,0201,0205,0209
	dc.w	0212,0216,0219,0222,0225,0228,0231,0234
	dc.w	0236,0238,0241,0243,0244,0246,0248,0249
	dc.w	0251,0252,0253,0254,0254,0255,0255,0255
	dc.w	0256,0255,0255,0255,0254,0254,0253,0252
	dc.w	0251,0249,0248,0246,0244,0243,0241,0238
	dc.w	0236,0234,0231,0228,0225,0222,0219,0216
	dc.w	0212,0209,0205,0201,0197,0193,0189,0185
	dc.w	0181,0176,0171,0167,0162,0157,0152,0147
	dc.w	0142,0136,0131,0126,0120,0115,0109,0103
	dc.w	0097,0092,0086,0080,0074,0068,0062,0056
	dc.w	0049,0043,0037,0031,0025,0018,0012,0006
	dc.w	0000,-006,-012,-018,-025,-031,-037,-043
	dc.w	-049,-056,-062,-068,-074,-080,-086,-092
	dc.w	-097,-103,-109,-117,-120,-126,-131,-136
	dc.w	-142,-147,-152,-157,-162,-167,-171,-176
	dc.w	-181,-185,-189,-193,-197,-201,-205,-209
	dc.w	-212,-216,-219,-222,-225,-228,-231,-234
	dc.w	-236,-238,-241,-243,-244,-246,-248,-249
	dc.w	-251,-252,-253,-254,-254,-255,-255,-255
	dc.w	-256,-255,-255,-255,-254,-254,-253,-252
	dc.w	-251,-249,-248,-246,-244,-243,-241,-238
	dc.w	-236,-234,-231,-228,-225,-222,-219,-216
	dc.w	-212,-209,-205,-201,-197,-193,-189,-185
	dc.w	-181,-176,-171,-167,-162,-157,-152,-147
	dc.w	-142,-136,-131,-126,-120,-117,-109,-103
	dc.w	-097,-092,-086,-080,-074,-068,-062,-056
	dc.w	-049,-043,-037,-031,-025,-018,-012,-006
	dc.w	0000,0006,0012,0018,0025,0031,0037,0043
	dc.w	0049,0056,0062,0068,0074,0080,0086,0092
	dc.w	0097,0103,0109,0115,0120,0126,0131,0136
	dc.w	0142,0147,0152,0157,0162,0167,0171,0176
	dc.w	0181,0185,0189,0193,0197,0201,0205,0209
	dc.w	0212,0216,0219,0222,0225,0228,0231,0234
	dc.w	0236,0238,0241,0243,0244,0246,0248,0249
	dc.w	0251,0252,0253,0254,0254,0255,0255,0255

atan:
	movem.l	d3-d4,-(sp)
	moveq	#0,d3
	moveq	#0,d4
	move.w	d1,d3
	move.w	d2,d4
	or.w	d3,d4
	beq.b	loc_1E0A
	move.w	d2,d4
	tst.w	d3
	bpl.b	loc_1DD0
	neg.w	d3
loc_1DD0:				; [TODO] original name unknown
	tst.w	d4
	bpl.b	loc_1DD6
	neg.w	d4
loc_1DD6:				; [TODO] original name unknown
	cmp.w	d3,d4
	bcc.b	loc_1DE6
	lsl.l	#8,d4
	divu.w	d3,d4
	moveq	#0,d0
	move.b	atantbl(pc,d4.w),d0
	bra.b	loc_1DF0
loc_1DE6:				; [TODO] original name unknown
	lsl.l	#8,d3
	divu.w	d4,d3
	moveq	#$40,d0
	sub.b	atantbl(pc,d3.w),d0
loc_1DF0:				; [TODO] original name unknown
	tst.w	d1
	bpl.b	loc_1DFA
	neg.w	d0
	addi.w	#$80,d0
loc_1DFA:				; [TODO] original name unknown
	tst.w	d2
	bpl.b	loc_1E04
	neg.w	d0
	addi.w	#$100,d0
loc_1E04:				; [TODO] original name unknown
	movem.l	(sp)+,d3-d4
	rts
loc_1E0A:				; [TODO] original name unknown
	move.w	#$40,d0
	movem.l	(sp)+,d3-d4
	rts
atantbl:				; [TODO] original formatting unknown
	dc.b	00,00,00,00,01,01
	dc.b	01,01,01,01,02,02
	dc.b	02,02,02,02,03,03
	dc.b	03,03,03,03,03,04
	dc.b	04,04,04,04,04,05
	dc.b	05,05,05,05,05,06
	dc.b	06,06,06,06,06,06
	dc.b	07,07,07,07,07,07
	dc.b	08,08,08,08,08,08
	dc.b	08,09,09,09,09,09
	dc.b	09,10,10,10,10,10
	dc.b	10,10,11,11,11,11
	dc.b	11,11,11,12,12,12
	dc.b	12,12,12,12,13,13
	dc.b	13,13,13,13,13,14
	dc.b	14,14,14,14,14,14
	dc.b	15,15,15,15,15,15
	dc.b	15,16,16,16,16,16
	dc.b	16,16,17,17,17,17
	dc.b	17,17,17,17,18,18
	dc.b	18,18,18,18,18,19
	dc.b	19,19,19,19,19,19
	dc.b	19,20,20,20,20,20
	dc.b	20,20,20,21,21,21
	dc.b	21,21,21,21,21,21
	dc.b	22,22,22,22,22,22
	dc.b	22,22,23,23,23,23
	dc.b	23,23,23,23,23,24
	dc.b	24,24,24,24,24,24
	dc.b	24,24,25,25,25,25
	dc.b	25,25,25,25,25,25
	dc.b	26,26,26,26,26,26
	dc.b	26,26,26,27,27,27
	dc.b	27,27,27,27,27,27
	dc.b	27,28,28,28,28,28
	dc.b	28,28,28,28,28,28
	dc.b	29,29,29,29,29,29
	dc.b	29,29,29,29,29,30
	dc.b	30,30,30,30,30,30
	dc.b	30,30,30,30,31,31
	dc.b	31,31,31,31,31,31
	dc.b	31,31,31,31,32,32
	dc.b	32,32,32,32,32,00

;------------------------------------------------------------------------------
	align
;------------------------------------------------------------------------------
	end
